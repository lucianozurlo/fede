<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SVG con textura + blend</title>
<style>
  :root {
    --bg: #0e0f13;
    --fg1: #7cc7ff;
    --fg2: #c4ffdd;
  }
  body {
    margin: 0; background: var(--bg); color: #eaeaea;
    min-height: 100svh; display: grid; place-items: center;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  }
  .wrap { max-width: 980px; width: min(90vw, 980px); }
  h1 { font-weight: 600; font-size: clamp(18px, 2.2vw, 24px); opacity:.85; letter-spacing:.4px; margin: 0 0 14px; }
  svg { width: 100%; height: auto; display: block; border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,.4); }
  .controls {
    margin-top: 12px; display: flex; gap: 16px; flex-wrap: wrap; align-items: center;
    font-size: 14px; opacity:.85;
  }
  .controls label { display: inline-flex; gap: 6px; align-items: center; }
  input[type="range"] { width: 220px; }
  select, input[type="range"] { accent-color: #74c0fc; }
</style>
</head>
<body>
  <div class="wrap">
    <h1>SVG con textura + blend (feTurbulence + feBlend)</h1>

    <!--
      DEMO:
      - Capa base: gradiente.
      - Capa textura: ruido procedural (feTurbulence) ajustado con feColorMatrix/feComponentTransfer.
      - Mezcla: feBlend (mode configurable).
      - Se aplica como filtro al grupo <g> que contiene las formas.
    -->
    <svg viewBox="0 0 1200 600" role="img" aria-label="Demo de textura y blend en SVG">
      <defs>
        <!-- Gradiente base para rellenar las formas -->
        <linearGradient id="grad" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0%"  stop-color="var(--fg1)"/>
          <stop offset="100%" stop-color="var(--fg2)"/>
        </linearGradient>

        <!-- FILTRO: genera textura y la mezcla con el gráfico -->
        <!-- Ajustes live mediante variables CSS-like dentro del DOM vía JS -->
        <filter id="texBlend" x="-20%" y="-20%" width="140%" height="140%" color-interpolation-filters="sRGB">
          <!-- Textura procedural -->
          <feTurbulence
            type="fractalNoise"
            baseFrequency="0.95"  <!-- escala del grano: más alto = grano más fino -->
            numOctaves="2"
            seed="7"
            result="noise"
          />
          <!-- Desatura el ruido -->
          <feColorMatrix in="noise" type="saturate" values="0" result="noiseMono" />
          <!-- Control de contraste/intensidad del ruido -->
          <feComponentTransfer in="noiseMono" result="noiseTuned">
            <!-- curva para alphas/valores: mové los puntos para más/menos grano visible -->
            <feFuncR type="gamma" amplitude="1" exponent="1.0" offset="0"/>
            <feFuncG type="gamma" amplitude="1" exponent="1.0" offset="0"/>
            <feFuncB type="gamma" amplitude="1" exponent="1.0" offset="0"/>
            <feFuncA type="table" tableValues="0 0.45 0.75 1"/> <!-- “densidad” -->
          </feComponentTransfer>

          <!-- Mezcla la textura con el gráfico base -->
          <!-- Por defecto mode=multiply; lo actualizamos por JS según el <select> -->
          <feBlend in="SourceGraphic" in2="noiseTuned" mode="multiply" result="blended"/>

          <!-- Salida final -->
          <feComposite in="blended" in2="SourceAlpha" operator="in" />
        </filter>

        <!-- Un clip para el texto (para que la textura quede “adentro” del texto) -->
        <clipPath id="textClip">
          <text x="50%" y="48%" text-anchor="middle"
                font-size="180" font-weight="900"
                font-family="system-ui, Segoe UI, Roboto, Ubuntu, Arial"
                dy=".35em" letter-spacing="6">BLEND</text>
        </clipPath>
      </defs>

      <!-- Fondo -->
      <rect width="1200" height="600" fill="#0a0b0f"/>

      <!-- Grupo filtrado: TODO lo de adentro recibe textura + blend -->
      <g filter="url(#texBlend)">

        <!-- Bloque 1: texto con gradiente, “recortado” con clip -->
        <g clip-path="url(#textClip)">
          <rect x="0" y="0" width="1200" height="600" fill="url(#grad)"/>
        </g>

        <!-- Bloque 2: figura geométrica con el mismo filtro -->
        <g>
          <circle cx="900" cy="360" r="140" fill="url(#grad)"/>
          <!-- Borde suave encima para contraste -->
          <circle cx="900" cy="360" r="140" fill="none" stroke="rgba(255,255,255,.2)" stroke-width="4"/>
        </g>

      </g>

      <!-- Pequeño brillo encima para darle punch -->
      <radialGradient id="glow" cx="0.6" cy="0.2" r="0.6">
        <stop offset="0%" stop-color="rgba(255,255,255,.25)" />
        <stop offset="100%" stop-color="rgba(255,255,255,0)" />
      </radialGradient>
      <rect width="1200" height="600" fill="url(#glow)" pointer-events="none"/>
    </svg>

    <div class="controls" id="ui">
      <label>
        Modo de mezcla:
        <select id="mode">
          <option selected>multiply</option>
          <option>overlay</option>
          <option>screen</option>
          <option>soft-light</option>
          <option>hard-light</option>
          <option>color-burn</option>
          <option>color-dodge</option>
          <option>darken</option>
          <option>lighten</option>
        </select>
      </label>

      <label>
        BaseFrequency (escala grano):
        <input id="freq" type="range" min="0.05" max="2" step="0.05" value="0.95" />
        <span id="freqVal">0.95</span>
      </label>

      <label>
        Densidad (alpha):
        <input id="dens" type="range" min="0" max="1" step="0.05" value="0.75" />
        <span id="densVal">0.75</span>
      </label>
    </div>
  </div>

<script>
  // Controles en vivo para que ajustes el efecto sin tocar el SVG
  const svg = document.querySelector("svg");
  const feTurb  = svg.querySelector("#texBlend feTurbulence");
  const feBlend = svg.querySelector("#texBlend feBlend");
  const feCompA = svg.querySelector('#texBlend feComponentTransfer feFuncA');

  const modeSel = document.getElementById("mode");
  const freqInp = document.getElementById("freq");
  const densInp = document.getElementById("dens");
  const freqVal = document.getElementById("freqVal");
  const densVal = document.getElementById("densVal");

  modeSel.addEventListener("input", () => {
    feBlend.setAttribute("mode", modeSel.value);
  });

  freqInp.addEventListener("input", () => {
    feTurb.setAttribute("baseFrequency", freqInp.value);
    freqVal.textContent = Number(freqInp.value).toFixed(2);
  });

  densInp.addEventListener("input", () => {
    // Reescribimos la tabla para aumentar/disminuir la opacidad de la textura
    const d = Number(densInp.value);
    // Tabla con 4 puntos: 0, medio bajo, medio alto, 1
    const low = (d * 0.6).toFixed(2);
    const high = (Math.max(d, 0.05)).toFixed(2);
    feCompA.setAttribute("type", "table");
    feCompA.setAttribute("tableValues", `0 ${low} ${high} 1`);
    densVal.textContent = d.toFixed(2);
  });
</script>
</body>
</html>
