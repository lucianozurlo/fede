<!doctype html>
<html lang="es">

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>Swipe Nav</title>
        <style>
            /* Opcional: evita “rebotes” laterales que interfieren con el gesto */
            html,
            body {
                height: 100%;
            }

            body {
                margin: 0;
            }

            /* Importante: permite scroll vertical normal pero “bloquea” pan horizontal */
            body {
                touch-action: pan-y;
                overscroll-behavior: contain;
                /* evita back/forward por swipe del navegador (cuando aplica) */
            }

            /* Solo para demo */
            .screen {
                height: 100%;
                display: grid;
                place-items: center;
                font: 600 18px/1.2 system-ui, -apple-system, Segoe UI, Roboto;
            }

        </style>
    </head>

    <body>
        <main class="screen">
            Página A — swipe a la izquierda/derecha
        </main>

        <script>
            /**
             * Swipe navigation (solo mobile)
             * - swipe izquierda => nextUrl
             * - swipe derecha   => prevUrl
             */
            (function swipeNav({
                prevUrl = null,
                nextUrl = null,
                minDistance = 70,   // px (ajustable)
                maxVertical = 60,   // px: si el gesto es muy vertical, no navega
                maxTime = 600       // ms: gesto rápido
            } = {}) {
                const isMobile = matchMedia("(pointer: coarse)").matches || /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
                if (!isMobile) return;

                let startX = 0, startY = 0, startT = 0;
                let tracking = false;

                function onDown(e) {
                    // Solo 1 dedo / toque primario
                    if (e.pointerType && e.pointerType !== "touch") return;
                    if (e.isPrimary === false) return;

                    tracking = true;
                    startX = e.clientX;
                    startY = e.clientY;
                    startT = performance.now();
                }

                function onUp(e) {
                    if (!tracking) return;
                    tracking = false;

                    const dx = e.clientX - startX;
                    const dy = e.clientY - startY;
                    const dt = performance.now() - startT;

                    if (dt > maxTime) return;                 // muy lento
                    if (Math.abs(dy) > maxVertical) return;   // demasiado vertical
                    if (Math.abs(dx) < minDistance) return;   // muy corto

                    // dx < 0: swipe izquierda | dx > 0: swipe derecha
                    if (dx < 0 && nextUrl) {
                        window.location.assign(nextUrl);
                    } else if (dx > 0 && prevUrl) {
                        window.location.assign(prevUrl);
                    }
                }

                // Pointer Events
                window.addEventListener("pointerdown", onDown, { passive: true });
                window.addEventListener("pointerup", onUp, { passive: true });

                // (Opcional) Si querés: cancelar si el usuario abre un scroll fuerte, etc.
                window.addEventListener("pointercancel", () => { tracking = false; }, { passive: true });

            })({
                prevUrl: "pagina-anterior.html",
                nextUrl: "pagina-siguiente.html"
            });
        </script>
    </body>

</html>
